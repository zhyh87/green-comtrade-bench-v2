{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://green-comtrade-bench.example.com/schemas/data_record.schema.json",
    "title": "Data Record Schema",
    "description": "JSON Schema for individual records in data.jsonl (Evaluation Contract v1.0.0)",
    "type": "object",
    "required": [
        "year",
        "reporter",
        "partner",
        "flow",
        "hs",
        "tradeValue",
        "netWeight",
        "qty",
        "record_id"
    ],
    "properties": {
        "year": {
            "type": "integer",
            "description": "Trade year (4-digit)",
            "minimum": 2000,
            "maximum": 2100
        },
        "reporter": {
            "type": "string",
            "description": "Reporter country code (ISO-3166-1 numeric)",
            "pattern": "^[0-9]{1,3}$"
        },
        "partner": {
            "type": "string",
            "description": "Partner country code (ISO-3166-1 numeric)",
            "pattern": "^[0-9]{1,3}$|^WLD$"
        },
        "flow": {
            "type": "string",
            "description": "Trade flow direction",
            "enum": [
                "M",
                "X"
            ]
        },
        "hs": {
            "type": "string",
            "description": "HS commodity code (2-6 digits)",
            "pattern": "^[0-9]{2,6}$|^TOTAL$"
        },
        "tradeValue": {
            "type": "integer",
            "description": "Trade value in USD",
            "minimum": 0
        },
        "netWeight": {
            "type": "integer",
            "description": "Net weight in kg",
            "minimum": 0
        },
        "qty": {
            "type": "integer",
            "description": "Quantity",
            "minimum": 0
        },
        "record_id": {
            "type": "string",
            "description": "Unique row identifier",
            "minLength": 1
        },
        "isTotal": {
            "type": "boolean",
            "description": "Totals marker (should be false in final output)"
        }
    },
    "additionalProperties": true,
    "if": {
        "properties": {
            "isTotal": {
                "const": true
            }
        }
    },
    "then": {
        "description": "Totals rows should be dropped; if present, validation fails",
        "properties": {
            "partner": {
                "const": "WLD"
            },
            "hs": {
                "const": "TOTAL"
            }
        }
    }
}